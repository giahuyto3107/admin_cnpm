<<<<<<< HEAD
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/admin.css">
    <link rel="stylesheet" href="css/toast-message.css">
    <link rel="stylesheet" href="css/admin-responsive.css">
    <link rel="icon" href="/pic/logo.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link href='https://fontawesome.com/search?q=sort&o=r' rel='stylesheet'>
    <title>Quản lý cửa hàng</title>
</head>

<body>
    <div class="container">
        <div class="sidebar active">
            <div class="menu-btn">
                <i class="material-symbols-outlined">chevron_left</i>
            </div>
            <div class="head">
                <div class="user-img">
                    <img src="/pic/logo.png" alt="">
                </div>
                <div class="user-details">
                    <h3 class="title"><span class="color">FAHASA</span></h3>
                </div>
            </div>
            <div class="nav">
                <div class="menu">
                    <div class="slide"></div>
                    <p class="title">TRANG CHỦ</p>
                    <ul>
                        <li class="sidebar-list-item tab-content active">
                            <a href="#">
                                <i class="material-symbols-outlined">
                                    grid_view
                                    </i>
                                <span class="text">ĐIỀU KHIỂN</span>
                            </a>
                        </li>
                        <li class="sidebar-list-item tab-content">
                            <a href="#">
                                <i class="material-symbols-outlined">
                                    book
                                    </i>
                                <span class="text">SẢN PHẨM</span>
                               
                            </a>
                        </li>

                        <li class="sidebar-list-item tab-content">
                            <a href="#">
                                <i class="material-symbols-outlined">
                                    groups
                                    </i>
                                <span class="text">TÀI KHOẢN</span>
                            </a>
                        </li>

                        <li class="sidebar-list-item tab-content">
                            <a href="#">
                                <i class="material-symbols-outlined">
                                    shopping_cart
                                    </i>
                                <span class="text">ĐƠN HÀNG</span>
                            </a>
                        </li>

                        <li class="sidebar-list-item tab-content">
                            <a href="#">
                                <i class="material-symbols-outlined">
                                    category
                                    </i>
                                <span class="text">THỐNG KÊ</span>
                               
                            </a>
                        </li>

                        <li class="sidebar-list-item tab-content">
                            <a href="#">
                                <i class="material-symbols-outlined">
                                    category
                                    </i>
                                <span class="text">THUỘC TÍNH</span>
                               
                            </a>
                        </li>
                        <li class="sidebar-list-item tab-content">
                            <a href="#">
                                <i class="material-symbols-outlined">
                                    task
                                    </i>
                                <span class="text">PHIẾU NHẬP</span>
                            </a>
                        </li>

                        <li class="sidebar-list-item tab-content">
                            <a href="#">
                                <i class="material-symbols-outlined">
                                    money
                                    </i>
                                <span class="text">KHUYẾN MÃI</span>
                            </a>
                        </li>

                        <li class="sidebar-list-item tab-content">
                            <a href="#">
                                <i class="material-symbols-outlined">
                                    house
                                    </i>
                                <span class="text">NHÀ CUNG CẤP</span>
                               
                            </a>
                        </li>

                        <li class="sidebar-list-item tab-content">
                            <a href="#">
                                <i class="material-symbols-outlined">
                                    person
                                    </i>
                                <span class="text">TÁC GIẢ</span>
                            </a>
                        </li>

                        <li class="sidebar-list-item tab-content">
                            <a href="#">
                                <i class="material-symbols-outlined">
                                    shop
                                    </i>
                                <span class="text">NHÀ XUẤT BẢN</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="menu">
                <div class="slide"></div>
                <p class="title">Settings</p>
                <ul>
                    <li class="sidebar-list-item user-logout">
                        <a href="/index.html">
                            <span class="material-symbols-outlined">
                                first_page
                                </span>
                        <span class="text">HomePage</span>
                        </a>
                    </li>
                    <li class="sidebar-list-item user-logout">
                        <a href="#" id="logout-acc">
                            <i class="material-symbols-outlined">
                                logout
                                </i>
                        <span class="text">Logout</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <!--main-->
        <main class="content">  
            <div class="top-sidebar">
                <div class="topbar">
                    <h1 class="title-mainpage">QUẢN LÍ CỬA HÀNG</h1>
                    <div class="hidden-sidebar" id="name-acc"></div>
                        <div class="circle"></div>
                        <div class="user">
                        <img src="/pic/userprofile.jpg">
                        </div>
                </div>
            </div>
            <div class="section active">
                <h1 class="page-title">Trang tổng quát của FAHASA</h1>
                <div class="cards">
                    <div class="card-single">
                        <div class="box">
                          <div class="flip-card">
                            <div class="flip-card-inner">
                              <div class="flip-card-front">
                                <div class="on-box">
                                  <img src="/pic/img1.jpg" >
                                  <h3>Khách hàng</h3>
                                </div>
                              </div>
                              <div class="flip-card-back">
                                <h2 id="amount-user"></h2>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="card-single">
                        <div class="box">
                          <div class="flip-card">
                            <div class="flip-card-inner">
                              <div class="flip-card-front">
                                <div class="on-box">
                                   <img src="/pic/img2.jpg" >
                                    <h3>Sản phẩm</h3> 
                                </div>
                              </div>
                              <div class="flip-card-back">
                                <h2 id="amount-product"></h2>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="card-single">
                        <div class="box">
                          <div class="flip-card">
                            <div class="flip-card-inner">
                              <div class="flip-card-front">
                                <div class="on-box">
                                   <img src="/pic/img3.jpg">
                                    <h3>Doanh thu</h3> 
                                </div>
                              </div>
                              <div class="flip-card-back">
                                <h2 id="doanh-thu"></h2>
                              </div>
                            </div>
                          </div>
                        </div>
                    </div>
                </div>
            </div> 
             <!-- Product  -->
             <div class="section product-all">
                <div class="admin-control">
                    <div class="admin-control-left">
                        <select name="the-loai" id="the-loai" onchange="showProduct()">
                            <option>Tất cả</option>
                            <option>Tâm lý học</option>
                            <option>Tâm linh - tôn giáo</option>
                            <option>Lịch sử Việt Nam</option>
                            <option>Ngôn tình</option>
                            <option>Đã xóa</option>
                        </select>
                    </div>
                    <div class="admin-control-center">
                        <form action="" class="form-search">
                            <span class="search-btn"><i class="search-btn"><i class="material-symbols-outlined">
                                search
                                </i></i></span>
                            <input id="form-search-product" type="text" class="form-search-input" placeholder="Tìm kiếm....." oninput="showProduct()">
                        </form>
                    </div>
                    <div class="admin-control-right">
                        <button class="btn-control-large" id="btn-cancel-product" onclick="cancelSearchProduct()"><i class="material-symbols-outlined">
                            restart_alt
                            </i><span> Làm mới</span></button>
                        <button class="btn-control-large" id="btn-add-product"><i class="material-symbols-outlined">
                            add
                            </i> <span> Thêm sản phẩm mới</span></button>                  
                    </div>
                </div>
                <div id="show-product"></div>
                <div class="page-nav">
                    <ul class="page-nav-list">
                    </ul>
                </div>
            </div>

            
            <!-- Account  -->
            <div class="section">
                <div class="admin-control">

                    
                    <div class="admin-control-right">
                        </form>      
    
                        <button id="btn-add-user" class="btn-control-large" onclick="openCreateUser()"><i class="material-symbols-outlined">
                            add
                            </i> <span>Thêm tài khoản</span></button>          
                    </div>
                </div>
                <div class="tab">
                    <div class="table">
                    <table width="100%">
                        <thead>
                            <tr>
                                <td>STT</td>
                                <td>Ảnh đại diện </td>
                                <td>Họ và tên</td>
                                <td>Địa chỉ </td>
                                <td>Email </td>
                                <td>Số điện thoại </td>
                                <td>Chức vụ </td>
                                <td>Tình trạng</td>
                                <td></td>
                            </tr>
                        </thead>
                        <tbody id="show-user">
                        </tbody>
                    </table> 
                </div>
                </div>
                <!-- </div> -->
            </div>

            <!-- Order  -->
            <div class="section">
                <div class="admin-control">
                    <div class="admin-control-left">
                        
                    </div>
                    <div class="admin-control-center">
                        <form action="" class="form-search">
                            <span class="search-btn"><i class="material-symbols-outlined">
                                search
                                </i></span>
                            <input id="form-search-order" type="text" class="form-search-input" placeholder="Tìm kiếm mã đơn, khách hàng..." oninput="searchBillByID()">
                        </form>
                    </div>
                    <div class="admin-control-right">            
                    </div>
                </div>
                <div class="table">
                    <table width="100%">
                        <thead>
                            <tr>
                                <td>Mã đơn</td>
                                <td>Khách hàng</td>
                                <td>Ngày đặt</td>
                                <td>Tổng tiền</td>
                                <td>Địa chỉ</td>
                                <td>Trạng thái</td>
                                <td>Cập nhật trạng thái</td>
                            </tr>
                        </thead>
                        <tbody id="showOrder">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- thong ke -->
            <div class="section">
                <div class="admin-control">
                    <div class="admin-control-left">
                        <select name="the-loai-tk" id="the-loai-tk" onchange="thongKe()">
                            <option>Tất cả</option>
                            <option>Nike</option>
                            <option>Jordan</option>
                            <option>Adidas</option>
                            <option>Converse</option>
                            <option>Vans</option>
                            <option>Khác</option>
                        </select>
                    </div>
                    <div class="admin-control-center">
                        <form action="" class="form-search">
                            <span class="search-btn"><i class="material-symbols-outlined">
                                search
                                </i></i></span>
                            <input id="form-search-tk" type="text" class="form-search-input" placeholder="Tìm kiếm tên sản phẩm..." oninput="thongKe()">
                        </form>
                    </div>
                    <div class="admin-control-right">
                        <form action="" class="fillter-date">
                            <div>
                                <label for="time-start">Từ</label>
                                <input type="date" class="form-control-date" id="time-start-tk" onchange="thongKe()">
                            </div>
                            <div>
                                <label for="time-end">Đến</label>
                                <input type="date" class="form-control-date" id="time-end-tk" onchange="thongKe()">
                            </div>
                        </form> 
                        <button class="btn-reset-order" onclick="thongKe(1)"><i class="material-symbols-outlined">
                            arrow_upward
                            </i></button>
                        <button class="btn-reset-order" onclick="thongKe(2)"><i class="material-symbols-outlined">
                            arrow_downward
                            </i></button>
                        <button class="btn-reset-order" onclick="thongKe(0)"><i class="material-symbols-outlined">
                            restart_alt
                            </i></button>                    
                    </div>
                </div>
                <div class="order-statistical" id="order-statistical">
                    <div class="order-statistical-item">
                        <div class="order-statistical-item-content">
                            <p class="order-statistical-item-content-desc">Sản phẩm được bán ra</p>
                            <h4 class="order-statistical-item-content-h" id="quantity-product"></h4>
                        </div>
                        <div class="order-statistical-item-icon">
                            <i class="material-symbols-outlined">
                                inventory_2
                                </i>
                        </div>
                    </div>
                    <div class="order-statistical-item">
                        <div class="order-statistical-item-content">
                            <p class="order-statistical-item-content-desc">Số lượng bán ra</p>
                            <h4 class="order-statistical-item-content-h" id="quantity-order"></h4>
                        </div>
                        <div class="order-statistical-item-icon">
                            <i class="material-symbols-outlined">
                                inventory
                                </i>
                        </div>
                    </div>
                    <div class="order-statistical-item">
                        <div class="order-statistical-item-content">
                            <p class="order-statistical-item-content-desc">Doanh thu</p>
                            <h4 class="order-statistical-item-content-h" id="quantity-sale"></h4>
                        </div>
                        <div class="order-statistical-item-icon">
                            <i class="material-symbols-outlined">
                                attach_money
                                </i>
                        </div>
                    </div>
                </div>
                <div class="tab">      
                <div class="table">
                    <table width="100%">
                        <thead>
                            <tr>
                                <td>STT</td>
                                <td>Tên sản phẩm</td>
                                <td>Số lượng bán</td>
                                <td>Doanh thu</td>
                                <td></td>
                            </tr>
                        </thead>
                        <tbody id="showTk">
                        </tbody>
                    </table>
                </div>
            </div>
            </div>

            <!-- THE LOAI -->
            <div class="section">
                <div class="admin-control">

                    
                    <div class="admin-control-right">
                        </form>      
    
                        <button id="btn-add-category" class="btn-control-large" onclick="openCreateCategory()"><i class="material-symbols-outlined">
                            add
                            </i> <span>Thêm thể loại</span></button>          
                    </div>
                </div>
                <div class="tab">
                    <div class="table">
                    <table width="100%">
                        <thead>
                            <tr>
                                <td>STT</td>
                                <td>Hình ảnh</td>
                                <td>Tên thể loại</td>
                                <td>Chức năng</td>
                                <td></td>
                            </tr>
                        </thead>
                        <tbody id="show-category">

                        </tbody>
                    </table> 
                </div>
                </div>
                <!-- </div> -->
            </div>

            <!-- Phieu nhap  -->
            <div class="section">
                <div class="admin-control">

                    
                    <div class="admin-control-right">
                        </form>      
    
                        <button id="btn-add-user" class="btn-control-large" onclick="openCreateAccount()"><i class="material-symbols-outlined">
                            add
                            </i> <span>Thêm khách hàng</span></button>          
                    </div>
                </div>
                <div class="tab">
                    <div class="table">
                    <table width="100%">
                        <thead>
                            <tr>
                                <td>STT</td>
                                <td>Họ và tên</td>
                                <td>Tình trạng</td>
                                <td></td>
                            </tr>
                        </thead>
                        <tbody id="show-user">
                        </tbody>
                    </table> 
                </div>
                </div>
                <!-- </div> -->
            </div>

            <!-- Khuyen mai  -->
            <div class="section">
                <div class="admin-control">

                    
                    <div class="admin-control-right">
                        </form>      
    
                        <button id="btn-add-user" class="btn-control-large" onclick="openCreateDiscount()"><i class="material-symbols-outlined">
                            add
                            </i> <span>Thêm mã giảm giá</span></button>          
                    </div>
                </div>
                <div class="tab">
                    <div class="table">
                    <table width="100%">
                        <thead>
                            <tr>
                                <td>Mã khuyến mãi </td>
                                <td>Giá trị</td>
                                <td>Loại</td>
                                <td>Ngày bắt đầu</td>
                                <td>Ngày kết thúc</td>
                                <td>Chức năng</td>
                            </tr>
                        </thead>
                        <tbody id="show-discount">
                        </tbody>
                    </table> 
                </div>
                </div>
                <!-- </div> -->
            </div>

            <!-- Nha CUNG CAP  -->
            <div class="section">
                <div class="admin-control">

                    
                    <div class="admin-control-right">
                        </form>      
    
                        <button id="btn-add-publisher" class="btn-control-large" onclick="openCreateSupplier()"><i class="material-symbols-outlined">
                            add
                            </i> <span>Thêm nhà cung cấp</span></button>          
                    </div>
                </div>
                <div class="tab">
                    <div class="table">
                    <table width="100%">
                        <thead>
                            <tr>
                                <td>STT</td>
                                <td>Tên nhà cung cấp</td>
                                <td>Email</td>
                                <td>Số điện thoại</td>
                                <td>Chức năng</td>
                                <td></td>
                            </tr>
                        </thead>
                        <tbody id="show-supplier">
                        </tbody>
                    </table> 
                </div>
                </div>
                <!-- </div> -->
            </div>


            <!-- Tac gia  -->
            <div class="section">
                <div class="admin-control">

                    <div class="admin-control-right">
                        </form>      
                        <button id="btn-add-author" class="btn-control-large" onclick="openCreateAuthor()"><i class="material-symbols-outlined">
                            add
                            </i> <span>Thêm tác giả</span></button>          
                    </div>
                </div>
                <div class="tab">
                    <div class="table">
                    <table width="100%">
                        <thead>
                            <tr>
                                <td>STT</td>
                                <td>Họ và tên</td>
                                <td>Chức năng</td>
                                <td></td>
                            </tr>
                        </thead>
                        <tbody id="show-author">
                        </tbody>
                    </table> 
                </div>
                </div>
                <!-- </div> -->
            </div>


            <!-- Nha xuat ban  -->
            <div class="section">
                <div class="admin-control">

                    
                    <div class="admin-control-right">
                        </form>      
    
                        <button id="btn-add-publisher" class="btn-control-large" onclick="openCreatePublisher()"><i class="material-symbols-outlined">
                            add
                            </i> <span>Thêm nhà xuất bản</span></button>          
                    </div>
                </div>
                <div class="tab">
                    <div class="table">
                    <table width="100%">
                        <thead>
                            <tr>
                                <td>STT</td>
                                <td>Tên nhà xuất bản</td>
                                <td>Chức năng</td>
                                <td></td>
                            </tr>
                        </thead>
                        <tbody id="show-publisher">
                        </tbody>
                    </table> 
                </div>
                </div>
                <!-- </div> -->
            </div>
        </main>
    </div>
<!-- THÊM SẢN PHẨM  -->
    <div class="modal add-product">
        <div class="modal-container">
            <h3 class="modal-container-title add-product-e">THÊM MỚI SẢN PHẨM</h3>
            <h3 class="modal-container-title edit-product-e">CHỈNH SỬA SẢN PHẨM</h3>
            <button class="modal-close product-form"><i class="material-symbols-outlined">
                close
                </i></button>
            <div class="modal-content">
                <form action="" class="add-product-form">
                    <div class="modal-content-left">
                        <img src="/pic/add-img.png" alt="" class="upload-image-preview">
                        <div class="form-group file">
                            <label for="up-hinh-anh" class="form-label-file"><i class="fa-regular fa-cloud-arrow-up"></i>Chọn hình ảnh</label>
                            <input accept="image/jpeg, image/png, image/jpg" id="up-hinh-anh" name="up-hinh-anh" type="file" class="form-control" onchange="uploadImage(this)">
                        </div>
                    </div>
                    <div class="modal-content-right">
                        <div class="form-group">
                         <label for="ten-mon" class="form-label">Tên sản phẩm</label>
                            <input id="ten-mon" name="ten-mon" type="text" placeholder="Nhập tên sản phẩm..."
                                class="form-control">
                            <span class="form-message"></span>
                        </div>

                        <div class="form-group">
                            <label for="publisher_id">Nhà xuất bản:</label>
                            <select id="publisher_id" name="publisher_id">
                            </select>
                            <span class="form-message"></span>
                        </div>

                        <div class="form-group">
                            <label for="category" class="form-label">Chọn thuộc tính</label>
                            <select name="category" id="chon-mon" multiple>
                            </select>
                            <span class="form-message"></span>
                        </div>

                        <div class="form-group">
                            <label for="author_ids" class="form-label">Tác giả:</label>
                            <select id="author_ids" name="author_ids[]" multiple>
                            </select>
                            <span class="form-message"></span>
                        </div>

                        <div class="form-group">
                            <label for="gia-moi" class="form-label">Giá bán</label>
                            <input id="gia-moi" id="gia-moi" type="text" placeholder="Nhập giá bán"
                                class="form-control">
                            <span class="form-message"></span>
                        </div>

                        <div class="form-group">
                                <label for="discount" class="form-label">Giảm giá:</label>
                                <select id="discount" name="discount">
                                </select>
                            <span class="form-message"></span>
                        </div>

                        <button class="form-submit2 btn-add-product-form add-product-e" id="add-product-button">
                            <i class="material-symbols-outlined">
                                add
                                </i>
                            <span>THÊM SẢN PHẨM</span>
                        </button>
                        <button class="form-submit2 btn-update-product-form edit-product-e" id="update-product-button">
                            <i class="material-symbols-outlined">
                                edit_note
                                </i>
                            <span>LƯU THAY ĐỔI</span>
                        </button>
                    </div>
                </form>
            </div>
            </form>
        </div>
    </div>

    <div class="modal detail-order">
        <div class="modal-container">
            <h3 class="modal-container-title">CHI TIẾT ĐƠN HÀNG</h3>
            <button class="modal-close"><i class="material-symbols-outlined">
                close
                </i></button>
            <div class="modal-detail-order">
            </div>
            <div class="modal-detail-bottom">               
            </div>
            </form>
        </div>
    </div>

    <div class="modal detail-order-product">
        <div class="modal-container">
            <button class="modal-close"><i class="material-symbols-outlined">
                close
                </i></button>
            <div class="table">
                <table width="100%">
                    <thead>
                        <tr>
                            <td>Mã đơn</td>
                            <td>Số lượng</td>
                            <td>Đơn giá</td>
                            <td>Ngày đặt</td>
                        </tr>
                    </thead>
                    <tbody id="show-product-order-detail">
                    </tbody>
                </table>
            </div>
            </form>
        </div>
    </div>


<!-- THEM TAC GIA VA SUA TAC GIA -->

    <div class="modal signup-author">
        <div class="modal-container">
            <h3 class="modal-container-title add-author-e">THÊM TÁC GIẢ MỚI</h3>
            <h3 class="modal-container-title edit-author-e">CHỈNH SỬA THÔNG TIN</h3>
            <button class="modal-close"><i class="material-symbols-outlined">
                close
                </i></button>

            <div class="form-content sign-up">
                <form action="" class="signup-author-form">
                    <div class="form-group">
                        <label for="fullname" class="form-label">Tên đầy đủ</label>
                        <input id="fullname" name="fullname" type="text" placeholder="VD: ABCD" class="form-control">
                        <span class="form-message-name form-message"></span>
                    </div>


                    <button class="form-submit add-author-e" id="signup-author-button">Thêm tác giả</button>
                    <button class="form-submit4 edit-author-e" id="btn-update-author"><i class="material-symbols-outlined">
                        save
                        </i> <span> Lưu</span></button>
                </form>
            </div>

        </div>
    </div>

<!-- THEM NHA XUAT BAN VA SUA NHA XUAT BAN -->

    <div class="modal signup-publisher">
        <div class="modal-container">
            <h3 class="modal-container-title add-publisher-e">THÊM NHÀ XUẤT BẢN MỚI</h3>
            <h3 class="modal-container-title edit-publisher-e">CHỈNH SỬA THÔNG TIN</h3>
            <button class="modal-close"><i class="material-symbols-outlined">
                close
                </i></button>

            <div class="form-content sign-up">
                <form action="" class="signup-publisher-form">
                    <div class="form-group">
                        <label for="fullname-nxb" class="form-label">Tên đầy đủ</label>
                        <input id="fullname-nxb" name="fullname-nxb" type="text" placeholder="VD: ABCD" class="form-control">
                        <span class="form-message-name form-message"></span>
                    </div>


                    <button class="form-submit add-publisher-e" id="signup-publisher-button">Đăng ký</button>
                    <button class="form-submit4 edit-publisher-e" id="btn-update-publisher"><i class="material-symbols-outlined">
                        save
                        </i> <span> Lưu</span></button>
                </form>
            </div>

        </div>
    </div>

<!-- THEM NHA XUAT BAN VA SUA NHA XUAT BAN -->

    <div class="modal signup-supplier">
        <div class="modal-container">
            <h3 class="modal-container-title add-supplier-e">THÊM NHÀ XUẤT BẢN MỚI</h3>
            <h3 class="modal-container-title edit-supplier-e">CHỈNH SỬA THÔNG TIN</h3>
            <button class="modal-close"><i class="material-symbols-outlined">
                close
                </i></button>

            <div class="form-content sign-up">
                <form action="" class="signup-supplier-form">
                    <div class="form-group">
                        <label for="fullname-ncc" class="form-label">Tên đầy đủ</label>
                        <input id="fullname-ncc" name="fullname-ncc" type="text" placeholder="VD: ABCD" class="form-control">

                        <label for="email-ncc" class="form-label">Email</label>
                        <input id="email-ncc" name="email-ncc" type="text" placeholder="VD: nhacungcap@gmail.com" class="form-control">

                        <label for="sdt-ncc" class="form-label">Số điện thoại</label>
                        <input id="sdt-ncc" name="sdt-ncc" type="text" placeholder="VD: 0987654321" class="form-control">

                        <span class="form-message-name form-message"></span>
                    </div>


                    <button class="form-submit add-supplier-e" id="signup-supplier-button">Đăng ký</button>
                    <button class="form-submit4 edit-supplier-e" id="btn-update-supplier"><i class="material-symbols-outlined">
                        save
                        </i> <span> Lưu</span></button>
                </form>
            </div>

        </div>
    </div>
    
<!-- THEM KHUYEN MAI VA SUA KHUYEN MAI -->

    <div class="modal signup-discount">
        <div class="modal-container">
            <h3 class="modal-container-title add-discount-e">THÊM MÃ KHUYẾN MÃI</h3>
            <h3 class="modal-container-title edit-discount-e">CHỈNH SỬA THÔNG TIN</h3>
            <button class="modal-close"><i class="material-symbols-outlined">
                close
                </i></button>

            <div class="form-content sign-up">
                <form action="" class="signup-discount-form">
                    <div class="form-group">
                        <label for="fullname-km" class="form-label">Tên mã khuyến mãi</label>
                        <input id="fullname-km" name="fullname-km" type="text" placeholder="VD: ABCD" class="form-control">

                        <label for="value-km" class="form-label">Giá trị mã khuyến mãi</label>
                        <input id="value-km" name="value-km" type="text" placeholder="VD: 20" class="form-control">

                        <label for="loai-km" class="form-label">Loại mã khuyến mãi</label>
                        <input id="loai-km" name="loai-km" type="text" placeholder="VD: PR" class="form-control">

                        <label for="start-km" class="form-label">Ngày bắt đầu</label>
                        <input id="start-km" name="start-km" type="text" placeholder="VD: 2024-2-10" class="form-control">

                        <label for="end-km" class="form-label">Ngày bắt đầu</label>
                        <input id="end-km" name="end-km" type="text" placeholder="VD: 2024-3-10" class="form-control">

                        <span class="form-message-name form-message"></span>
                    </div>


                    <button class="form-submit add-discount-e" id="signup-discount-button">Thêm mã</button>
                    <button class="form-submit4 edit-discount-e" id="btn-update-discount"><i class="material-symbols-outlined">
                        save
                        </i> <span> Lưu</span></button>
                </form>
            </div>

        </div>
    </div>
    
<!-- THEM THE LOAI VA SUA THE LOAI -->

<div class="modal signup-category">
    <div class="modal-container">
        <h3 class="modal-container-title add-category-e">THÊM THỂ LOẠI MỚI</h3>
        <h3 class="modal-container-title edit-category-e">CHỈNH SỬA THÔNG TIN</h3>
        <button class="modal-close"><i class="material-symbols-outlined">
            close
            </i></button>

        <div class="form-content sign-up">
            <form action="" class="signup-category-form">
                <div class="form-group">
                    <br>
                    <label for="up-hinh-anh-category" class="form-label form-label-file-category">Chọn hình ảnh</label>
                    <input accept="image/jpeg, image/png, image/jpg" id="up-hinh-anh-category" name="up-hinh-anh-category" type="file" placeholder="Mã base 64 của hình ảnh" class="form-control">
                    <br>
                    <br>
                    <label for="fullname-category" class="form-label">Tên thể loại</label>
                    <input id="fullname-category" name="fullname-category" type="text" placeholder="VD: ABCD" class="form-control">

                    <span class="form-message-name form-message"></span>
                </div>


                <button class="form-submit add-category-e" id="signup-category-button">Thêm thể loại</button>
                <button class="form-submit4 edit-category-e" id="btn-update-category"><i class="material-symbols-outlined">
                    save
                    </i> <span> Lưu</span></button>
            </form>
        </div>

    </div>
</div>

<!-- THEM TAI KHOAN VA SUA TAI KHOAN -->

<div class="modal signup-user">
    <div class="modal-container">
        <h3 class="modal-container-title add-user-e">THÊM TÀI KHOẢN MỚI</h3>
        <h3 class="modal-container-title edit-user-e">CHỈNH SỬA THÔNG TIN</h3>
        <button class="modal-close"><i class="material-symbols-outlined">
            close
            </i></button>

        <div class="form-content sign-up">
            <form action="" class="signup-user-form">
                <div class="form-group">
                    <br>
                    <label for="up-hinh-anh-user" class="form-label form-label-file-user">Chọn hình ảnh</label>
                    <input accept="image/jpeg, image/png, image/jpg" id="up-hinh-anh-user" name="up-hinh-anh-category" type="file" placeholder="Mã base 64 của hình ảnh" class="form-control">
                    <br>
                    <br>
                    <label for="fullname-user" class="form-label">Họ và tên</label>
                    <input id="fullname-user" name="fullname-user" type="text" placeholder="VD: ABCD" class="form-control">
                    
                    <br>
                    <label for="address-user" class="form-label address-user">Địa chỉ</label>
                    <input id="address-user" name="address-user" type="text"  placeholder="VD: ABCD" class="form-control">
                    
                    <br>
                    <label for="email-user" class="form-label email-user">Email</label>
                    <input id="email-user" name="email-user" type="text"  placeholder="VD: ABCD" class="form-control">
                    
                    <br>
                    <label for="sdt-user" class="form-label sdt-user">Họ và tên</label>
                    <input id="sdt-user" name="sdt-user" type="text"  placeholder="VD: ABCD" class="form-control">
                    
                 
                    <span class="form-message-name form-message"></span>
                </div>


                <button class="form-submit add-user-e" id="signup-user-button">Thêm tài khoản</button>
                <button class="form-submit4 edit-user-e" id="btn-update-user"><i class="material-symbols-outlined">
                    save
                    </i> <span> Lưu</span></button>
            </form>
        </div>

    </div>
</div>

<div class="modal signup-role">
    <div class="modal-container my-modal">
        <h3 class="modal-container-title edit-user-e">CHỈNH SỬA CHỨC VỤ</h3>
        <button class="modal-close"><i class="material-symbols-outlined">
            close
            </i></button>

        <div class="form-content sign-up">
            <form action="" class="signup-role-form">
                
                <label for="role-select">Chọn vai trò:</label>
                    <select id="role-select">
                    <option value="1">Người Quản lí</option>
                    <option value="2">Nhân viên</option>
                    <option value="3">Khách hàng</option>
                </select>
                    
                <br>
                <br>
                <button class="form-submit4 edit-role-e" id="btn-update-role"><i class="material-symbols-outlined">
                    save
                    </i> <span> Lưu</span></button>
            </form>
        </div>

    </div>
</div>

<div class="modal signup-pass">
    <div class="modal-container">
        <h3 class="modal-container-title add-pass-e">THÊM NHÀ XUẤT BẢN MỚI</h3>
        <h3 class="modal-container-title edit-pass-e">CHỈNH SỬA THÔNG TIN</h3>
        <button class="modal-close"><i class="material-symbols-outlined">
            close
            </i></button>

        <div class="form-content sign-up">
            <form action="" class="signup-pass-form">
                <div class="form-group">
                    <label for="password-input" class="form-label">Mật khẩu mới</label>
                    <input id="password-input" name="password-input" type="text" placeholder="VD: ABCD" class="form-control">

                    <span class="form-message-name form-message"></span>
                </div>


                <button class="form-submit add-pass-e" id="signup-pass-button">Đăng ký</button>
                <button class="form-submit4 edit-pass-e" id="btn-update-pass"><i class="material-symbols-outlined">
                    save
                    </i> <span> Lưu</span></button>
            </form>
        </div>

    </div>
</div>

<div class="modal signup-register">
    <div class="modal-container">
        <h3 class="modal-container-title add-register-e">THÊM TÀI KHOẢN</h3>
        <h3 class="modal-container-title edit-register-e">CHỈNH SỬA THÔNG TIN</h3>
        <button class="modal-close"><i class="material-symbols-outlined">
            close
            </i></button>

        <div class="form-content sign-up">
            <form action="" class="signup-register-form">
                <div class="form-group">
                    <label for="email-input" class="form-label">Email</label>
                    <input id="email-input" name="email-input" type="text" placeholder="VD: ABCD" class="form-control">

                    <label for="pass-input" class="form-label">Mật khẩu</label>
                    <input id="pass-input" name="pass-input" type="text" placeholder="VD: ABCD" class="form-control">

                    <span class="form-message-name form-message"></span>
                </div>


                <button class="form-submit add-register-e" id="signup-register-button">Đăng ký</button>
                <button class="form-submit4 edit-register-e" id="btn-update-register"><i class="material-symbols-outlined">
                    save
                    </i> <span> Lưu</span></button>
            </form>
        </div>

    </div>
</div>

    <script>
        function login() {
  fetch('http://localhost:8080/api/v1/users/login', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      email: 'admin@sgu.edu.vn',
      password: '123456',
    }),
  })
    .then(response => response.json())
    .then(data => {
      const accessToken = data.content.access_token;
      //LƯU TOKEN VÀO LOCAL STORAGE
      localStorage.setItem('accessToken', accessToken);
      console.log('Token saved to localStorage:', accessToken);
    })
    .catch(error => {
      console.error('Login failed:', error);
    });
}
    login();
        // Fetch data from the API and show orders
        function fetchDataAndShowOrder() {
            // Get the access token from localStorage
            const accessToken = localStorage.getItem('accessToken');

            // Check if the access token exists
            if (!accessToken) {
                console.error('Token not found in localStorage');
                return;
            }

            // Fetch data from the API
            fetch('http://localhost:8080/api/v1/bills', {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                    token: accessToken,
                },
            })
                .then(response => response.json())
                .then(data => {
                    let orderHtml = "";
                    if (data.content.length === 0) {
                        orderHtml = `<tr><td colspan="6">Không có dữ liệu</td></tr>`;
                    } else {
                        data.content.forEach(item => {

                            //let status = item.bill_status_id === 10 ? '<span class="status-no-complete">Chua xử lý</span>' : '<span class="status-complete">Da xử lý</span>';
                            let date = formatDate(item.date_create);

                            orderHtml += `
                            <tr>
                                <td>${item.id}</td>
                                <td>${item.fullname}</td>
                                <td>${date}</td>
                                <td>${vnd(item.total_price)}</td>
                                <td>${item.address}</td>
                                <td class='status'>${item.status}</td>
                                <td class='buttonchangestatus'>
                                    <button class='daduyet' onclick="updateBillStatus(2, ${item.id})">Duyệt đơn hàng</button>
                                    <button class='dahuy' onclick="updateBillStatus(3, ${item.id})">Hủy đơn</button>
            </td>
                            </tr>`;
                        });
                    }
                    document.getElementById("showOrder").innerHTML = orderHtml;
                })
                .catch(error => {
                    console.error('Failed to fetch data:', error);
                });
        }


        // Format the date
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', options);
        }

        // Format currency value in VND
        function vnd(amount) {
            const formatter = new Intl.NumberFormat('vi-VN', {
                style: 'currency',
                currency: 'VND'
            });
            return formatter.format(amount);
        }
        function updateBillStatus(newStatus, billId) {
            // Get the access token from localStorage
            const accessToken = localStorage.getItem('accessToken');

            // Check if the access token exists
            if (!accessToken) {
                console.error('Token not found in localStorage');
                return;
            }

            // Get the bill ID from the user input


            // Data to be sent in the request body
            const updateData = {
                bill_status_id: newStatus,
            };

            // Send request to update bill status
            fetch(`http://localhost:8080/api/v1/bills/bill/${billId}`, {
                method: 'PUT', // or 'PATCH' depending on the API requirement
                headers: {
                    'Content-Type': 'application/json',
                    token: accessToken,
                },
                body: JSON.stringify(updateData),
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Failed to update bill status');
                    }
                    // Reload trang khi cập nhật thành công
                    location.reload();
                    return response.json();
                })
                .then(data => {
                    console.log('Kết quả cập nhật trạng thái đơn hàng:', data);
                    // Process the update result here
                })
                .catch(error => {
                    console.error('Failed to update bill status:', error);
                });
        }

        function findOrder() {
            // Lấy giá trị được chọn từ dropdown
            const selectedValue = document.getElementById('tinh-trang').value;

            // Lấy tất cả các hàng đơn hàng
            const orderRows = document.querySelectorAll('#showOrder tr');

            // Duyệt qua từng hàng đơn hàng và ẩn hoặc hiển thị tùy thuộc vào giá trị được chọn
            orderRows.forEach(row => {
                const statusElement = row.querySelector('.status');
                const status = statusElement.getAttribute('data-status');

                // Nếu giá trị được chọn là '0' (Tất cả) hoặc giá trị được chọn trùng với giá trị của phần tử, hiển thị hàng đơn hàng
                if (selectedValue === '0' || selectedValue === status) {
                    row.style.display = 'table-row';
                } else {
                    // Ngược lại, ẩn hàng đơn hàng
                    row.style.display = 'none';
                }
            });
        }


        function searchAndUpdateOrder(event) {
            // Check if Enter key is pressed (for search)
            if (event.keyCode === 13) {
                searchBillByID();
            } else {
                fetchDataAndShowOrder();
            }
        }

        function searchBillByID() {
            // Get the access token from localStorage
            const accessToken = localStorage.getItem('accessToken');

            // Check if the access token exists
            if (!accessToken) {
                console.error('Token not found in localStorage');
                return;
            }

            // Get the bill ID from the user input
            const searchInput = document.getElementById('form-search-order');
            const billId = searchInput.value.trim();

            // Fetch data from the API
            fetch(`http://localhost:8080/api/v1/bills/bill/${billId}`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                    token: accessToken,
                },
            })
                .then(response => response.json())
                .then(data => {
                    console.log('Kết quả tìm kiếm bằng mã đơn hàng:', data.content);

                    // Update the HTML element with the search result
                    const searchResultElement = document.getElementById('search-result');
                    searchResultElement.textContent = `Kết quả tìm kiếm: ${data.content}`;

                    // Call the function to fetch and show the order data
                    if (data.content) {
                        fetchDataAndShowOrder();
                    } else {
                        // Clear the order list if no search result is found
                        const showOrderElement = document.getElementById('showOrder');
                        showOrderElement.innerHTML = '';
                    }
                })
                .catch(error => {
                    console.error('Failed to fetch data:', error);
                });
        }
        // Add keydown event listener to the search input

        const searchInput = document.getElementById('form-search-order');
        searchInput.addEventListener('keydown', searchBillByID);



        // Call the function to fetch data and show orders when the document is loaded
        document.addEventListener('DOMContentLoaded', fetchDataAndShowOrder);
    </script>
    <div id="toast"></div>
    
    <!-- Jquery -->
    <script
    src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.js"
    integrity="sha512-8Z5++K1rB3U+USaLKG6oO8uWWBhdYsM3hmdirnOEWp8h2B1aOikj5zBzlXs8QOrvY9OxEnD2QDkbSKKpfqcIWw=="
    crossorigin="anonymous"></script>
    <script src="/js/admin.js"></script>
    <script src="/js/toast-message.js"></script>
</body>
=======
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/admin.css">
    <link rel="stylesheet" href="css/toast-message.css">
    <link rel="stylesheet" href="css/admin-responsive.css">
    <link rel="icon" href="/pic/logo.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link href='https://fontawesome.com/search?q=sort&o=r' rel='stylesheet'>
    <title>Quản lý cửa hàng</title>
</head>

<body>
    <div class="container">
        <div class="sidebar active">
            <div class="menu-btn">
                <i class="material-symbols-outlined">chevron_left</i>
            </div>
            <div class="head">
                <div class="user-img">
                    <img src="/pic/logo.png" alt="">
                </div>
                <div class="user-details">
                    <h3 class="title"><span class="color">FAHASA</span></h3>
                </div>
            </div>
            <div class="nav">
                <div class="menu">
                    <div class="slide"></div>
                    <p class="title">TRANG CHỦ</p>
                    <ul>
                        <li class="sidebar-list-item tab-content active">
                            <a href="#">
                                <i class="material-symbols-outlined">
                                    grid_view
                                    </i>
                                <span class="text">ĐIỀU KHIỂN</span>
                            </a>
                        </li>
                        <li class="sidebar-list-item tab-content">
                            <a href="#">
                                <i class="material-symbols-outlined">
                                    book
                                    </i>
                                <span class="text">SẢN PHẨM</span>
                               
                            </a>
                        </li>

                        <li class="sidebar-list-item tab-content">
                            <a href="#">
                                <i class="material-symbols-outlined">
                                    groups
                                    </i>
                                <span class="text">TÀI KHOẢN</span>
                            </a>
                        </li>

                        <li class="sidebar-list-item tab-content">
                            <a href="#">
                                <i class="material-symbols-outlined">
                                    shopping_cart
                                    </i>
                                <span class="text">ĐƠN HÀNG</span>
                            </a>
                        </li>

                        <li class="sidebar-list-item tab-content">
                            <a href="#">
                                <i class="material-symbols-outlined">
                                    category
                                    </i>
                                <span class="text">THUỘC TÍNH</span>
                               
                            </a>
                        </li>

                        <li class="sidebar-list-item tab-content">
                            <a href="#">
                                <i class="material-symbols-outlined">
                                    task
                                    </i>
                                <span class="text">PHIẾU NHẬP</span>
                            </a>
                        </li>

                        <li class="sidebar-list-item tab-content">
                            <a href="#">
                                <i class="material-symbols-outlined">
                                    money
                                    </i>
                                <span class="text">KHUYẾN MÃI</span>
                            </a>
                        </li>

                        <li class="sidebar-list-item tab-content">
                            <a href="#">
                                <i class="material-symbols-outlined">
                                    house
                                    </i>
                                <span class="text">NHÀ XUẤT BẢN</span>
                               
                            </a>
                        </li>

                        <li class="sidebar-list-item tab-content">
                            <a href="#">
                                <i class="material-symbols-outlined">
                                    person
                                    </i>
                                <span class="text">TÁC GIẢ</span>
                            </a>
                        </li>

                        <li class="sidebar-list-item tab-content">
                            <a href="#">
                                <i class="material-symbols-outlined">
                                    shop
                                    </i>
                                <span class="text">NHÀ CUNG CẤP</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="menu">
                <div class="slide"></div>
                <p class="title">Settings</p>
                <ul>
                    <li class="sidebar-list-item user-logout">
                        <a href="/index.html">
                            <span class="material-symbols-outlined">
                                first_page
                                </span>
                        <span class="text">HomePage</span>
                        </a>
                    </li>
                    <li class="sidebar-list-item user-logout">
                        <a href="#" id="logout-acc">
                            <i class="material-symbols-outlined">
                                logout
                                </i>
                        <span class="text">Logout</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <!--main-->
        <main class="content">  
            <div class="top-sidebar">
                <div class="topbar">
                    <h1 class="title-mainpage">QUẢN LÍ CỬA HÀNG</h1>
                    <div class="hidden-sidebar" id="name-acc"></div>
                        <div class="circle"></div>
                        <div class="user">
                        <img src="/pic/userprofile.jpg">
                        </div>
                </div>
            </div>
            <div class="section active">
                <h1 class="page-title">Trang tổng quát của FAHASA</h1>
                <div class="cards">
                    <div class="card-single">
                        <div class="box">
                          <div class="flip-card">
                            <div class="flip-card-inner">
                              <div class="flip-card-front">
                                <div class="on-box">
                                  <img src="/pic/img1.jpg" >
                                  <h3>Khách hàng</h3>
                                </div>
                              </div>
                              <div class="flip-card-back">
                                <h2 id="amount-user"></h2>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="card-single">
                        <div class="box">
                          <div class="flip-card">
                            <div class="flip-card-inner">
                              <div class="flip-card-front">
                                <div class="on-box">
                                   <img src="/pic/img2.jpg" >
                                    <h3>Sản phẩm</h3> 
                                </div>
                              </div>
                              <div class="flip-card-back">
                                <h2 id="amount-product"></h2>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="card-single">
                        <div class="box">
                          <div class="flip-card">
                            <div class="flip-card-inner">
                              <div class="flip-card-front">
                                <div class="on-box">
                                   <img src="/pic/img3.jpg">
                                    <h3>Doanh thu</h3> 
                                </div>
                              </div>
                              <div class="flip-card-back">
                                <h2 id="doanh-thu"></h2>
                              </div>
                            </div>
                          </div>
                        </div>
                    </div>
                </div>
            </div> 
             <!-- Product  -->
             <div class="section product-all">
                <div class="admin-control">
                    <div class="admin-control-left">
                        <select name="the-loai" id="the-loai" onchange="showProduct()">
                            <option>Tất cả</option>
                            <option>Tâm lý học</option>
                            <option>Tâm linh - tôn giáo</option>
                            <option>Lịch sử Việt Nam</option>
                            <option>Ngôn tình</option>
                            <option>Đã xóa</option>
                        </select>
                    </div>
                    <div class="admin-control-center">
                        <form action="" class="form-search">
                            <span class="search-btn"><i class="search-btn"><i class="material-symbols-outlined">
                                search
                                </i></i></span>
                            <input id="form-search-product" type="text" class="form-search-input" placeholder="Tìm kiếm....." oninput="showProduct()">
                        </form>
                    </div>
                    <div class="admin-control-right">
                        <button class="btn-control-large" id="btn-cancel-product" onclick="cancelSearchProduct()"><i class="material-symbols-outlined">
                            restart_alt
                            </i><span> Làm mới</span></button>
                        <button class="btn-control-large" id="btn-add-product"><i class="material-symbols-outlined">
                            add
                            </i> <span> Thêm sản phẩm mới</span></button>                  
                    </div>
                </div>
                <div id="show-product"></div>
                <div class="page-nav">
                    <ul class="page-nav-list">
                    </ul>
                </div>
            </div>


            <!-- Account  -->
            <div class="section">
                <div class="admin-control">

                    
                    <div class="admin-control-right">
                        </form>      
    
                        <button id="btn-add-user" class="btn-control-large" onclick="openCreateAccount()"><i class="material-symbols-outlined">
                            add
                            </i> <span>Thêm khách hàng</span></button>          
                    </div>
                </div>
                <div class="tab">
                    <div class="table">
                    <table width="100%">
                        <thead>
                            <tr>
                                <td>STT</td>
                                <td>Họ và tên</td>
                                <td>Tình trạng</td>
                                <td></td>
                            </tr>
                        </thead>
                        <tbody id="show-user">
                        </tbody>
                    </table> 
                </div>
                </div>
                <!-- </div> -->
            </div>

            <!-- Order  -->
            <div class="section">
                <div class="admin-control">
                    <div class="admin-control-left">
                        
                    </div>
                    <div class="admin-control-center">
                        <form action="" class="form-search">
                            <span class="search-btn"><i class="material-symbols-outlined">
                                search
                                </i></span>
                            <input id="form-search-order" type="text" class="form-search-input" placeholder="Tìm kiếm mã đơn, khách hàng..." oninput="searchBillByID()">
                        </form>
                    </div>
                    <div class="admin-control-right">            
                    </div>
                </div>
                <div class="table">
                    <table width="100%">
                        <thead>
                            <tr>
                                <td>Mã đơn</td>
                                <td>Khách hàng</td>
                                <td>Ngày đặt</td>
                                <td>Tổng tiền</td>
                                <td>Địa chỉ</td>
                                <td>Trạng thái</td>
                                <td>Cập nhật trạng thái</td>
                            </tr>
                        </thead>
                        <tbody id="showOrder">
                        </tbody>
                    </table>
                </div>
            </div>

            
            <div class="section">
                <div class="admin-control">
                    <div class="admin-control-left">
                        <select name="the-loai-tk" id="the-loai-tk" onchange="thongKe()">
                            <option>Tất cả</option>
                            <option>Nike</option>
                            <option>Jordan</option>
                            <option>Adidas</option>
                            <option>Converse</option>
                            <option>Vans</option>
                            <option>Khác</option>
                        </select>
                    </div>
                    <div class="admin-control-center">
                        <form action="" class="form-search">
                            <span class="search-btn"><i class="material-symbols-outlined">
                                search
                                </i></i></span>
                            <input id="form-search-tk" type="text" class="form-search-input" placeholder="Tìm kiếm tên sản phẩm..." oninput="thongKe()">
                        </form>
                    </div>
                    <div class="admin-control-right">
                        <form action="" class="fillter-date">
                            <div>
                                <label for="time-start">Từ</label>
                                <input type="date" class="form-control-date" id="time-start-tk" onchange="thongKe()">
                            </div>
                            <div>
                                <label for="time-end">Đến</label>
                                <input type="date" class="form-control-date" id="time-end-tk" onchange="thongKe()">
                            </div>
                        </form> 
                        <button class="btn-reset-order" onclick="thongKe(1)"><i class="material-symbols-outlined">
                            arrow_upward
                            </i></button>
                        <button class="btn-reset-order" onclick="thongKe(2)"><i class="material-symbols-outlined">
                            arrow_downward
                            </i></button>
                        <button class="btn-reset-order" onclick="thongKe(0)"><i class="material-symbols-outlined">
                            restart_alt
                            </i></button>                    
                    </div>
                </div>
                <div class="order-statistical" id="order-statistical">
                    <div class="order-statistical-item">
                        <div class="order-statistical-item-content">
                            <p class="order-statistical-item-content-desc">Sản phẩm được bán ra</p>
                            <h4 class="order-statistical-item-content-h" id="quantity-product"></h4>
                        </div>
                        <div class="order-statistical-item-icon">
                            <i class="material-symbols-outlined">
                                inventory_2
                                </i>
                        </div>
                    </div>
                    <div class="order-statistical-item">
                        <div class="order-statistical-item-content">
                            <p class="order-statistical-item-content-desc">Số lượng bán ra</p>
                            <h4 class="order-statistical-item-content-h" id="quantity-order"></h4>
                        </div>
                        <div class="order-statistical-item-icon">
                            <i class="material-symbols-outlined">
                                inventory
                                </i>
                        </div>
                    </div>
                    <div class="order-statistical-item">
                        <div class="order-statistical-item-content">
                            <p class="order-statistical-item-content-desc">Doanh thu</p>
                            <h4 class="order-statistical-item-content-h" id="quantity-sale"></h4>
                        </div>
                        <div class="order-statistical-item-icon">
                            <i class="material-symbols-outlined">
                                attach_money
                                </i>
                        </div>
                    </div>
                </div>
                <div class="tab">      
                <div class="table">
                    <table width="100%">
                        <thead>
                            <tr>
                                <td>STT</td>
                                <td>Tên sản phẩm</td>
                                <td>Số lượng bán</td>
                                <td>Doanh thu</td>
                                <td></td>
                            </tr>
                        </thead>
                        <tbody id="showTk">
                        </tbody>
                    </table>
                </div>
            </div>
            </div>


            <!-- Phieu nhap  -->
            <div class="section">
                <div class="admin-control">

                    
                    <div class="admin-control-right">
                        </form>      
    
                        <button id="btn-add-user" class="btn-control-large" onclick="openCreateAccount()"><i class="material-symbols-outlined">
                            add
                            </i> <span>Thêm khách hàng</span></button>          
                    </div>
                </div>
                <div class="tab">
                    <div class="table">
                    <table width="100%">
                        <thead>
                            <tr>
                                <td>STT</td>
                                <td>Họ và tên</td>
                                <td>Tình trạng</td>
                                <td></td>
                            </tr>
                        </thead>
                        <tbody id="show-user">
                        </tbody>
                    </table> 
                </div>
                </div>
                <!-- </div> -->
            </div>

            <!-- Khuyen mai  -->
            <div class="section">
                <div class="admin-control">

                    
                    <div class="admin-control-right">
                        </form>      
    
                        <button id="btn-add-user" class="btn-control-large" onclick="openCreateAccount()"><i class="material-symbols-outlined">
                            add
                            </i> <span>Thêm khách hàng</span></button>          
                    </div>
                </div>
                <div class="tab">
                    <div class="table">
                    <table width="100%">
                        <thead>
                            <tr>
                                <td>STT</td>
                                <td>Họ và tên</td>
                                <td>Tình trạng</td>
                                <td></td>
                            </tr>
                        </thead>
                        <tbody id="show-user">
                        </tbody>
                    </table> 
                </div>
                </div>
                <!-- </div> -->
            </div>

            <!-- Nha xuat ban  -->
            <div class="section">
                <div class="admin-control">

                    
                    <div class="admin-control-right">
                        </form>      
    
                        <button id="btn-add-user" class="btn-control-large" onclick="openCreateAccount()"><i class="material-symbols-outlined">
                            add
                            </i> <span>Thêm khách hàng</span></button>          
                    </div>
                </div>
                <div class="tab">
                    <div class="table">
                    <table width="100%">
                        <thead>
                            <tr>
                                <td>STT</td>
                                <td>Họ và tên</td>
                                <td>Tình trạng</td>
                                <td></td>
                            </tr>
                        </thead>
                        <tbody id="show-user">
                        </tbody>
                    </table> 
                </div>
                </div>
                <!-- </div> -->
            </div>


            <!-- Tac gia  -->
            <div class="section">
                <div class="admin-control">

                    <div class="admin-control-right">
                        </form>      
                        <button id="btn-add-author" class="btn-control-large" onclick="openCreateAuthor()"><i class="material-symbols-outlined">
                            add
                            </i> <span>Thêm tác giả</span></button>          
                    </div>
                </div>
                <div class="tab">
                    <div class="table">
                    <table width="100%">
                        <thead>
                            <tr>
                                <td>STT</td>
                                <td>Họ và tên</td>
                                <td>Chức năng</td>
                                <td></td>
                            </tr>
                        </thead>
                        <tbody id="show-author">
                        </tbody>
                    </table> 
                </div>
                </div>
                <!-- </div> -->
            </div>


            <!-- Nha cung cap  -->
            <div class="section">
                <div class="admin-control">

                    
                    <div class="admin-control-right">
                        </form>      
    
                        <button id="btn-add-user" class="btn-control-large" onclick="openCreateAccount()"><i class="material-symbols-outlined">
                            add
                            </i> <span>Thêm khách hàng</span></button>          
                    </div>
                </div>
                <div class="tab">
                    <div class="table">
                    <table width="100%">
                        <thead>
                            <tr>
                                <td>STT</td>
                                <td>Họ và tên</td>
                                <td>Tình trạng</td>
                                <td></td>
                            </tr>
                        </thead>
                        <tbody id="show-user">
                        </tbody>
                    </table> 
                </div>
                </div>
                <!-- </div> -->
            </div>
        </main>
    </div>

    <div class="modal add-product">
        <div class="modal-container">
            <h3 class="modal-container-title add-product-e">THÊM MỚI SẢN PHẨM</h3>
            <h3 class="modal-container-title edit-product-e">CHỈNH SỬA SẢN PHẨM</h3>
            <button class="modal-close product-form"><i class="material-symbols-outlined">
                close
                </i></button>
            <div class="modal-content">
                <form action="" class="add-product-form">
                    <div class="modal-content-left">
                        <img src="/pic/add-img.png" alt="" class="upload-image-preview">
                        <div class="form-group file">
                            <label for="up-hinh-anh" class="form-label-file"><i class="fa-regular fa-cloud-arrow-up"></i>Chọn hình ảnh</label>
                            <input accept="image/jpeg, image/png, image/jpg" id="up-hinh-anh" name="up-hinh-anh" type="file" class="form-control" onchange="uploadImage(this)">
                        </div>
                    </div>
                    <div class="modal-content-right">
                        <div class="form-group">
                         <label for="ten-mon" class="form-label">Tên sản phẩm</label>
                            <input id="ten-mon" name="ten-mon" type="text" placeholder="Nhập tên sản phẩm..."
                                class="form-control">
                            <span class="form-message"></span>
                        </div>

                        <div class="form-group">
                            <label for="publisher_id">Nhà xuất bản:</label>
                            <select id="publisher_id" name="publisher_id">
                            </select>
                            <span class="form-message"></span>
                        </div>

                        <div class="form-group">
                            <label for="category" class="form-label">Chọn thuộc tính</label>
                            <select name="category" id="chon-mon" multiple>
                            </select>
                            <span class="form-message"></span>
                        </div>

                        <div class="form-group">
                            <label for="author_ids" class="form-label">Tác giả:</label>
                            <select id="author_ids" name="author_ids[]" multiple>
                            </select>
                            <span class="form-message"></span>
                        </div>

                        <div class="form-group">
                            <label for="gia-moi" class="form-label">Giá bán</label>
                            <input id="gia-moi" id="gia-moi" type="text" placeholder="Nhập giá bán"
                                class="form-control">
                            <span class="form-message"></span>
                        </div>

                        <div class="form-group">
                                <label for="discount" class="form-label">Giảm giá:</label>
                                <select id="discount" name="discount">
                                </select>
                            <span class="form-message"></span>
                        </div>

                        <button class="form-submit2 btn-add-product-form add-product-e" id="add-product-button">
                            <i class="material-symbols-outlined">
                                add
                                </i>
                            <span>THÊM SẢN PHẨM</span>
                        </button>
                        <button class="form-submit2 btn-update-product-form edit-product-e" id="update-product-button">
                            <i class="material-symbols-outlined">
                                edit_note
                                </i>
                            <span>LƯU THAY ĐỔI</span>
                        </button>
                    </div>
                </form>
            </div>
            </form>
        </div>
    </div>

    <div class="modal detail-order">
        <div class="modal-container">
            <h3 class="modal-container-title">CHI TIẾT ĐƠN HÀNG</h3>
            <button class="modal-close"><i class="material-symbols-outlined">
                close
                </i></button>
            <div class="modal-detail-order">
            </div>
            <div class="modal-detail-bottom">               
            </div>
            </form>
        </div>
    </div>

    <div class="modal detail-order-product">
        <div class="modal-container">
            <button class="modal-close"><i class="material-symbols-outlined">
                close
                </i></button>
            <div class="table">
                <table width="100%">
                    <thead>
                        <tr>
                            <td>Mã đơn</td>
                            <td>Số lượng</td>
                            <td>Đơn giá</td>
                            <td>Ngày đặt</td>
                        </tr>
                    </thead>
                    <tbody id="show-product-order-detail">
                    </tbody>
                </table>
            </div>
            </form>
        </div>
    </div>


<!-- THEM TAC GIA VA SUA TAC GIA -->

    <div class="modal signup-author">
        <div class="modal-container">
            <h3 class="modal-container-title add-author-e">THÊM KHÁCH HÀNG MỚI</h3>
            <h3 class="modal-container-title edit-author-e">CHỈNH SỬA THÔNG TIN</h3>
            <button class="modal-close"><i class="material-symbols-outlined">
                close
                </i></button>

            <div class="form-content sign-up">
                <form action="" class="signup-author-form">
                    <div class="form-group">
                        <label for="fullname" class="form-label">Tên đầy đủ</label>
                        <input id="fullname" name="fullname" type="text" placeholder="VD: ABCD" class="form-control">
                        <span class="form-message-name form-message"></span>
                    </div>


                    <button class="form-submit add-author-e" id="signup-author-button">Đăng ký</button>
                    <button class="form-submit4 edit-author-e" id="btn-update-author"><i class="material-symbols-outlined">
                        save
                        </i> <span> Lưu</span></button>
                </form>
            </div>

        </div>
    </div>
    <script>
        function login() {
  fetch('http://localhost:8080/api/v1/users/login', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      email: 'admin@sgu.edu.vn',
      password: '123456',
    }),
  })
    .then(response => response.json())
    .then(data => {
      const accessToken = data.content.access_token;
      //LƯU TOKEN VÀO LOCAL STORAGE
      localStorage.setItem('accessToken', accessToken);
      console.log('Token saved to localStorage:', accessToken);
    })
    .catch(error => {
      console.error('Login failed:', error);
    });
}
    login();
        // Fetch data from the API and show orders
        function fetchDataAndShowOrder() {
            // Get the access token from localStorage
            const accessToken = localStorage.getItem('accessToken');

            // Check if the access token exists
            if (!accessToken) {
                console.error('Token not found in localStorage');
                return;
            }

            // Fetch data from the API
            fetch('http://localhost:8080/api/v1/bills', {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                    token: accessToken,
                },
            })
                .then(response => response.json())
                .then(data => {
                    let orderHtml = "";
                    if (data.content.length === 0) {
                        orderHtml = `<tr><td colspan="6">Không có dữ liệu</td></tr>`;
                    } else {
                        data.content.forEach(item => {

                            //let status = item.bill_status_id === 10 ? '<span class="status-no-complete">Chua xử lý</span>' : '<span class="status-complete">Da xử lý</span>';
                            let date = formatDate(item.date_create);

                            orderHtml += `
                            <tr>
                                <td>${item.id}</td>
                                <td>${item.fullname}</td>
                                <td>${date}</td>
                                <td>${vnd(item.total_price)}</td>
                                <td>${item.address}</td>
                                <td class='status'>${item.status}</td>
                                <td class='buttonchangestatus'>
                                    <button class='daduyet' onclick="updateBillStatus(2, ${item.id})">Duyệt đơn hàng</button>
                                    <button class='dahuy' onclick="updateBillStatus(3, ${item.id})">Hủy đơn</button>
            </td>
                            </tr>`;
                        });
                    }
                    document.getElementById("showOrder").innerHTML = orderHtml;
                })
                .catch(error => {
                    console.error('Failed to fetch data:', error);
                });
        }


        // Format the date
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', options);
        }

        // Format currency value in VND
        function vnd(amount) {
            const formatter = new Intl.NumberFormat('vi-VN', {
                style: 'currency',
                currency: 'VND'
            });
            return formatter.format(amount);
        }
        function updateBillStatus(newStatus, billId) {
            // Get the access token from localStorage
            const accessToken = localStorage.getItem('accessToken');

            // Check if the access token exists
            if (!accessToken) {
                console.error('Token not found in localStorage');
                return;
            }

            // Get the bill ID from the user input


            // Data to be sent in the request body
            const updateData = {
                bill_status_id: newStatus,
            };

            // Send request to update bill status
            fetch(`http://localhost:8080/api/v1/bills/bill/${billId}`, {
                method: 'PUT', // or 'PATCH' depending on the API requirement
                headers: {
                    'Content-Type': 'application/json',
                    token: accessToken,
                },
                body: JSON.stringify(updateData),
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Failed to update bill status');
                    }
                    // Reload trang khi cập nhật thành công
                    location.reload();
                    return response.json();
                })
                .then(data => {
                    console.log('Kết quả cập nhật trạng thái đơn hàng:', data);
                    // Process the update result here
                })
                .catch(error => {
                    console.error('Failed to update bill status:', error);
                });
        }

        function findOrder() {
            // Lấy giá trị được chọn từ dropdown
            const selectedValue = document.getElementById('tinh-trang').value;

            // Lấy tất cả các hàng đơn hàng
            const orderRows = document.querySelectorAll('#showOrder tr');

            // Duyệt qua từng hàng đơn hàng và ẩn hoặc hiển thị tùy thuộc vào giá trị được chọn
            orderRows.forEach(row => {
                const statusElement = row.querySelector('.status');
                const status = statusElement.getAttribute('data-status');

                // Nếu giá trị được chọn là '0' (Tất cả) hoặc giá trị được chọn trùng với giá trị của phần tử, hiển thị hàng đơn hàng
                if (selectedValue === '0' || selectedValue === status) {
                    row.style.display = 'table-row';
                } else {
                    // Ngược lại, ẩn hàng đơn hàng
                    row.style.display = 'none';
                }
            });
        }


        function searchAndUpdateOrder(event) {
            // Check if Enter key is pressed (for search)
            if (event.keyCode === 13) {
                searchBillByID();
            } else {
                fetchDataAndShowOrder();
            }
        }

        function searchBillByID() {
            // Get the access token from localStorage
            const accessToken = localStorage.getItem('accessToken');

            // Check if the access token exists
            if (!accessToken) {
                console.error('Token not found in localStorage');
                return;
            }

            // Get the bill ID from the user input
            const searchInput = document.getElementById('form-search-order');
            const billId = searchInput.value.trim();

            // Fetch data from the API
            fetch(`http://localhost:8080/api/v1/bills/bill/${billId}`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                    token: accessToken,
                },
            })
                .then(response => response.json())
                .then(data => {
                    console.log('Kết quả tìm kiếm bằng mã đơn hàng:', data.content);

                    // Update the HTML element with the search result
                    const searchResultElement = document.getElementById('search-result');
                    searchResultElement.textContent = `Kết quả tìm kiếm: ${data.content}`;

                    // Call the function to fetch and show the order data
                    if (data.content) {
                        fetchDataAndShowOrder();
                    } else {
                        // Clear the order list if no search result is found
                        const showOrderElement = document.getElementById('showOrder');
                        showOrderElement.innerHTML = '';
                    }
                })
                .catch(error => {
                    console.error('Failed to fetch data:', error);
                });
        }
        // Add keydown event listener to the search input

        const searchInput = document.getElementById('form-search-order');
        searchInput.addEventListener('keydown', searchBillByID);



        // Call the function to fetch data and show orders when the document is loaded
        document.addEventListener('DOMContentLoaded', fetchDataAndShowOrder);
    </script>
    <div id="toast"></div>
    
    <!-- Jquery -->
    <script
    src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.js"
    integrity="sha512-8Z5++K1rB3U+USaLKG6oO8uWWBhdYsM3hmdirnOEWp8h2B1aOikj5zBzlXs8QOrvY9OxEnD2QDkbSKKpfqcIWw=="
    crossorigin="anonymous"></script>
    <script src="/js/admin.js"></script>
    <script src="/js/toast-message.js"></script>
</body>
>>>>>>> a24671c99ab54caffe8907373bdac3d7ea0b62a8
</html>